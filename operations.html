<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Spectrum CRM â€” Operations Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta content="Ops utilization & inventory" name="description" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link rel="icon" href="data:,">
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/css/jquery-ui.min.css" rel="stylesheet" />
  <link href="assets/css/icons.min.css" rel="stylesheet" />
  <link href="assets/css/metisMenu.min.css" rel="stylesheet" />
  <link href="assets/css/app.min.css" rel="stylesheet" />
</head>
<body>

<script>
  // Wait for Firebase globals to be available
  window.addEventListener('load', function() {
    auth.onAuthStateChanged(async (user) => {
      if (!user) {
        console.log("User not authenticated, showing login prompt");
        showLoginPrompt('the Operations dashboard');
        return;
      }
      
      // Hide login prompt and show main content
      hideLoginPrompt();
      
      // Check user role using compat Firestore API
      try {
        const userDoc = await db.collection('users').doc(user.uid).get();
        const role = userDoc.exists ? userDoc.data().role : "frontdesk";
        window.currentRole = role;
        
        const path = window.location.pathname.split("/").pop();
        const adminOnly = ["admin.html"];
        const marketingOnly = ["marketing.html","projects.html","gallery.html"];
        
        if (adminOnly.includes(path) && role !== "admin") {
          window.location.href="unauthorized.html";
        }
        if (marketingOnly.includes(path) && role==="frontdesk") {
          window.location.href="unauthorized.html";
        }
        
        console.log("User authenticated with role:", role);
      } catch (error) {
        console.error("Error checking user role:", error);
      }
    });
  });
</script>
  <div class="topbar">
    <div class="topbar-left">
      <a href="index.html" class="logo">
        <span><img src="assets/images/logo-sm.png" class="logo-sm" alt=""></span>
        <span><img src="assets/images/logo.png" class="logo-lg logo-light" alt=""><img src="assets/images/logo-dark.png" class="logo-lg" alt=""></span>
      </a>
    </div>
    <nav class="navbar-custom">
      <div id="authStatus" style="margin-left:20px; float:left; padding-top:15px; color:white;"></div>
      <ul class="list-unstyled topbar-nav float-right mb-0">
        <li class="dropdown notification-list">
          <a class="nav-link dropdown-toggle arrow-none waves-light waves-effect" data-toggle="dropdown" href="#" role="button">
            <i class="ti-bell noti-icon"></i>
            <span class="badge badge-danger badge-pill noti-icon-badge">2</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right dropdown-lg">
            <!-- notifications here -->
          </div>
        </li>
      </ul>
    </nav>
  </div>

<div class="left-sidenav">
  <ul class="metismenu left-sidenav-menu">

    <!-- Dashboards -->
    <li>
      <a href="javascript:void(0);">
        <i class="ti-bar-chart"></i><span>Dashboard</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span>
      </a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="crm.html"><i class="ti-control-record"></i>CRM</a></li>
        <li class="nav-item"><a class="nav-link" href="analytics.html"><i class="ti-control-record"></i>Analytics</a></li>
        <li class="nav-item"><a class="nav-link" href="helpdesk.html"><i class="ti-control-record"></i>Helpdesk</a></li>
        <li class="nav-item"><a class="nav-link" href="sales.html"><i class="ti-control-record"></i>Sales (Admin)</a></li>
      </ul>
    </li>

    <!-- Medspa Dashboards -->
    <li>
      <a href="javascript:void(0);">
        <i class="ti-layers-alt"></i><span>Medspa Dashboards</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span>
      </a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="marketing.html"><i class="ti-control-record"></i>Marketing</a></li>
        <li class="nav-item"><a class="nav-link" href="financial.html"><i class="ti-control-record"></i>Financial</a></li>
        <li class="nav-item"><a class="nav-link" href="operations.html"><i class="ti-control-record"></i>Operations</a></li>
      </ul>
    </li>

    <!-- Pipeline -->
    <li>
      <a href="javascript:void(0);">
        <i class="ti-user"></i><span>Pipeline</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span>
      </a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="leads.html"><i class="ti-control-record"></i>Leads</a></li>
        <li class="nav-item"><a class="nav-link" href="followups.html"><i class="ti-control-record"></i>Follow-ups</a></li>
        <li class="nav-item"><a class="nav-link" href="rebooking.html"><i class="ti-control-record"></i>Rebookings</a></li>
      </ul>
    </li>

    <!-- Apps -->
    <li>
      <a href="javascript:void(0);">
        <i class="ti-package"></i><span>Apps</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span>
      </a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="app-email.html"><i class="ti-control-record"></i>Email (Google)</a></li>
        <li class="nav-item"><a class="nav-link" href="app-chat.html"><i class="ti-control-record"></i>Chat (Google)</a></li>
        <li class="nav-item"><a class="nav-link" href="app-contacts.html"><i class="ti-control-record"></i>Contact List</a></li>
        <li class="nav-item"><a class="nav-link" href="app-calendar.html"><i class="ti-control-record"></i>Calendar (Google)</a></li>
        <li class="nav-item"><a class="nav-link" href="quotes.html"><i class="ti-control-record"></i>Treatment Quotes</a></li>
      </ul>
    </li>

    <!-- Projects -->
    <li>
      <a href="javascript:void(0);">
        <i class="ti-pencil-alt"></i><span>Projects</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span>
      </a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="projects.html"><i class="ti-control-record"></i>Publer-style Publishing</a></li>
      </ul>
    </li>

    <!-- Admin -->
    <li>
      <a href="javascript:void(0);"><i class="ti-settings"></i><span>Admin</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span></a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="admin.html"><i class="ti-control-record"></i>Admin Console</a></li>
      </ul>
    </li>

    <!-- Pages -->
    <li>
      <a href="javascript:void(0);">
        <i class="ti-agenda"></i><span>Pages</span>
        <span class="menu-arrow"><i class="mdi mdi-chevron-right"></i></span>
      </a>
      <ul class="nav-second-level" aria-expanded="false">
        <li class="nav-item"><a class="nav-link" href="vendors.html"><i class="ti-control-record"></i>Vendor Mgmt & Purchasing</a></li>
        <li class="nav-item"><a class="nav-link" href="inventory.html"><i class="ti-control-record"></i>Inventory</a></li>
        <li class="nav-item"><a class="nav-link" href="pricing.html"><i class="ti-control-record"></i>Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="gallery.html"><i class="ti-control-record"></i>Gallery</a></li>
      </ul>
    </li>

  </ul>
</div>

  <div class="page-wrapper">
    <div class="page-content">
      <div class="container-fluid">
        <!-- Breadcrumb + Title -->
        <div class="row">
          <div class="col-sm-12">
            <div class="page-title-box">
              <div class="float-right">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="#">Crovex</a></li>
                  <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                  <li class="breadcrumb-item active">Operations</li>
                </ol>
              </div>
              <h4 class="page-title">Operations</h4>
            </div>
          </div>
        </div>

        <!-- Coming Soon Card -->
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-body">
                <h4 class="header-title">Operations Dashboard</h4>
                <h6 class="card-subtitle text-muted mb-4">Coming Soon</h6>
                <p class="text-muted">
                  This section will track inventory usage, booking load, and room utilization.
                </p>
                
                <div class="row mt-4">
                  <div class="col-md-4">
                    <div class="text-center p-3">
                      <i class="ti-stats-up text-primary" style="font-size: 2rem;"></i>
                      <h6 class="mt-2 mb-0">Provider Utilization</h6>
                      <p class="text-muted small">Track provider efficiency</p>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="text-center p-3">
                      <i class="ti-time text-success" style="font-size: 2rem;"></i>
                      <h6 class="mt-2 mb-0">Booking Load</h6>
                      <p class="text-muted small">Monitor appointment scheduling</p>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="text-center p-3">
                      <i class="ti-package text-warning" style="font-size: 2rem;"></i>
                      <h6 class="mt-2 mb-0">Room Utilization</h6>
                      <p class="text-muted small">Optimize space efficiency</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div><!-- container -->

      <footer class="footer text-center text-sm-left">
        &copy; 2020 Crovex <span class="text-muted d-none d-sm-inline-block float-right">Mannatthemes</span>
      </footer>
    </div>
  </div>

  <!-- Core JS -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/metismenu.min.js"></script>
  <script src="assets/js/waves.js"></script>
  <script src="assets/js/feather.min.js"></script>
  <script src="assets/js/jquery.slimscroll.min.js"></script>
  <script src="assets/js/jquery-ui.min.js"></script>

  <!-- Plugins used by this page -->
  <script src="plugins/moment/moment.js"></script>
  <script src="plugins/apexcharts/apexcharts.min.js"></script>
  <script src="plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
  <script src="plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>

  <!-- Page init (safe if missing; charts just won't render) -->

  <!-- App js (initializes metisMenu, slimscroll, etc.) -->
  <script src="assets/js/app.js"></script>
  <!-- Firebase SDK -->
  <script src="assets/js/login-prompt.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="assets/js/firebase-config.js"></script>
</body>
</html>